---
title: "Computational Musicology Portfolio"
author: "River Vaudrin"
date: "22 February 2021"
output: 
    flexdashboard::flex_dashboard:
        storyboard: true
        theme: flatly
---

```{r setup, include=FALSE}
# Load packages
library(tidyverse)
library(plotly) 
library(spotifyr)
library(ggrepel)
library(flexdashboard)
# library(compmus)


# Load entire discography 
snowden_disc <- get_artist_audio_features("12XwWwI5wcnQySACjbgf2y")
eilert_disc <- get_artist_audio_features("7aS6aXw9eYfVQxCG1RcVEK")
willis_disc <- get_artist_audio_features("50yovZJnAHoy0pBruvFaCR")
tim_disc <- get_artist_audio_features("0Nc79lkTxXLSIIHDB8mqJC")
shaggs_disc <- get_artist_audio_features("5ixdD9E7P9r51AOcSInQbl")
daniel_disc <- get_artist_audio_features("1jeYbk5eqo6wgsQPjLeU5w")

# Create new dataframe with all artists entire discography
disc <- list(snowden_disc, eilert_disc, willis_disc, tim_disc, shaggs_disc, daniel_disc) %>%
  reduce(full_join)


# Load specific albums
snowden_album <- subset(snowden_disc, album_name=="Life in the USA and Canada")
eilert_album <- subset(eilert_disc, album_name=="Eilert Is Back")
willis_album <- subset(willis_disc, album_name=="Rush Hour")
tim_album <- subset(tim_disc, album_name=="God Bless Tiny Tim")
shaggs_album <- subset(shaggs_disc, album_name=="Philosophy of the World" & album_id=="0TzI1YcMAQVdQ4yUZuy7fA")
daniel_album <- subset(daniel_disc, album_name=="Yip / Jump Music")

# Create new dataframe with all albums
albums <- list(snowden_album, eilert_album, willis_album, tim_album, shaggs_album, daniel_album) %>%
  reduce(full_join)


# Load specific tracks
snowden_song <- subset(snowden_album, track_name=="In Canada")
eilert_song <- subset(eilert_album, track_name=="Suspicious Minds")
willis_song <- subset(willis_album, track_name=="I Whipped Batman's Ass")
tim_song <- subset(tim_album, track_name=="Livin' in the Sunlight, Lovin' in the Moon Light")
shaggs_song <- subset(shaggs_album, track_name=="Who Are Parents?")
daniel_song <- subset(daniel_album, track_name=="The Beatles")

# Create new dataframe with all songs
songs <- list(snowden_song, eilert_song, willis_song, tim_song, shaggs_song, daniel_song) %>%
  reduce(full_join)
```

### Outsiders: idiosyncratic and unconnected from conventional art by cicumstance.

Outsider music is a derivative of <a href="https://www.britannica.com/art/outsider-art">outsider art</a>, which is defined as "any work of art produced by an untrained idiosyncratic artist who is typically unconnected to the conventional art world—not by choice but by circumstance." Its defining feature is "the tendency of the artists to be “straight talking” (even if that talk is straight from a radically different worldview)." In 2000, Irwin Chusid conceptualized the term outsider music in his book: Songs in the Key of Z, in which he explores the field of outsider music by highlighting its most prominent artists. Chusid defines outsider music as "crackpot and visionary music, where all trails lead essentially one place: over the edge." The book was accompanied by two compilation albums that featured a variety of outsider musicians. 

These definitions are quite vague, however, I think that we can make it less ambiguous if we look at the differences between outsider musicians and other idiosyncratic musicians that make unconventional music. The first difference is that outsider musicians create unconventional art by circumstance, and not by choice. "By circumstance" can be interpreted in multiple ways. One interpretation is easily noticeable from Chusid's categorization, and that is most of the artists have some kind of mental disorder. Tiny Tim had Asperger's syndrome, Wesley Willis was a schizophrenic, and Daniel Johnson was both schizophrenic and bipolar. In other words, their unconventionality stemmed from their disorders. Another interpretation is exemplified by The Shaggs, they were a band comprised of three teenage sisters in 1968 formed by their father. One day their father received news from his fortune teller mother that his daughters would become famous musicians, even though his daughters didn't have any experience in making music. Although, after hearing this prophecy he withdrew his daughters from school and sold some family belongings to buy his daughters' instruments, and so the band was formed. These kids essentially had no choice than to play music, and their inexperience shines trough on their first album Philosophy of the World. 

Another key difference that sets outsider musicians apart is the amateurish sound of their music. If the definition of an outsider musician is a musician that makes unconventional music by circumstance, then we could consider Beach Boys' Brian Wilson as an outsider musician, as he was, like Daniel Johnson, diagnosed with schizophrenia and bipolar disorder. However, Wilson's music is far more commercially successful than all of the outsider musicians mentioned by Chusid, I think that this is due to the fact that his music doesn't poses an amateurish quality. In summary, his means that the two defining features of outsider music are that it sounds amateuristic, and that it sounds unconventional because of the circumstances the musicians find themselves in. 

My corpus will consist of albums from artists that can be found on the compilation albums of Chusid's Songs in the Key of Z. The goal is to analyze the corpus with metrics provided by Spotify, and determine whether it is possible to categorize these outsider musicians on the basis of these metrics.

I decided to pick these albums mainly because they were created by outsider musicians that were classified as such by the person who introduced the concept of outsider music. However, I chose these particular artists from Chusid's book because I have listened to these albums and I actually find them very enjoyable.  

***
**Corpus:**
 -  Life In the USA and Canada, by B.J. Snowden
 -  Eilart Is Back, by Eilert Pilram
 -  Rush Hour, Wesley Willis
 -  God Bless Tiny Tim, by Tiny Tim
 -  Philosophy of the World, by The Shaggs
 -  Yip! Jump Music, by Daniel Johnston
 
Strengths and limitations of the corpus:

 - The artists all have a very unique style of making music.
 - All of Wesley Willis' songs have the exact same structure, perhaps this could be valuable, who knows. 
 - Eilart Pilram is a Swedish Elvis impersonator, thus his album is entirely comprised of Elvis covers.
 - All of the albums have been classified as outsider music, without much debate. Except for that one time that B.J. Snowden criticized Chusid because she felt she did not belong on his list of outsiders.
 - Variety in styles might point to some interesting differences between these outsider musicians.

*** 

**Interesting songs**
- In Canada, by B.J Snowden
- Suspicious Minds, by Eilert Pilram
- I Wipped Batman's Ass, by Wesley Willis
- Livin' In the Sunlight, Lovin' In the Moon Light, by Tiny Tim
- Who Are Parents?, by The Shaggs 
- The Beatles, by Daniel Johnston

I've highlighted these songs for two reasons, (1) because they all possess a childlike quality, a feature that is often mentioned as a characteristic of outsider music; (2) and because I wanted to examine at least one song of every artist in the corpus in more detail. It will be interesting to see if the childlike quality would in some way be reflected in the metrics, valence and energy could show to be fruitful, as optimism, energy and positivity are common traits of childlike music. It might not be enough to confidently categorize outsider music, but it could be a starting point.



### Outsiders cannot be generalized trough mood. (pt. 1)

```{r songmoodplot_1}
mean_valence_energy <- albums %>% 
  group_by(album_name) %>% 
  summarise(artist_name = artist_name,
            album_name = album_name,
            track_name = track_name,
            valence = mean(valence),
            energy  = mean(energy))


song_mood_plot <- ggplot(albums, aes(energy, valence, color=artist_name, shape=album_name, label=track_name)) +
  geom_point(alpha=.45) +
  geom_point(data=mean_valence_energy, size=4) +
  geom_vline(xintercept=0.5, linetype="dotted") +
  geom_hline(yintercept=0.5, linetype="dotted") +
  theme_bw() +
  xlim(0,1) +
  ylim(0,1) +
  labs(
    title = "Song mood (corpus albums)",
    x = "Energy",
    y = "Valence"
  )

song_mood_plot <-song_mood_plot + 
                 annotate("text", x=.25, y=.25, label="Sad", alpha=.6) +
                 annotate("text", x=.25, y=.75, label="Relaxed", alpha=.6) +
                 annotate("text", x=.75, y=.25, label="Angry", alpha=.6) +
                 annotate("text", x=.75, y=.75, label="Happy", alpha=.6) 

ggplotly(song_mood_plot)
```

***

First I tried to determine the mood (relaxed, happy, angry or sad) of each album. I did this by using the valence and energy parameters. Spotify defines these as:

- Valence: A measure from 0.0 to 1.0 describing the musical positiveness conveyed by a track. Tracks with high valence sound more positive (e.g. happy, cheerful, euphoric), while tracks with low valence sound more negative (e.g. sad, depressed, angry).

- Energy: Energy is a measure from 0.0 to 1.0 and represents a perceptual measure of intensity and activity. Typically, energetic tracks feel fast, loud, and noisy. For example, death metal has high energy, while a Bach prelude scores low on the scale. Perceptual features contributing to this attribute include dynamic range, perceived loudness, timbre, onset rate, and general entropy.

These parameters allow us to categorize the mood of each song. Next, if we compute the mean of the songs for each album, we can categorize the mood of each album. The results can be seen below. 

When we look at the results, we can observe that all albums are relatively close to the center of the plot. This means that we cannot confidently match any album to a certain mood. We can only conclude that Tiny Tim's album is less energetic than all of the other albums, and that Wesley Willis' album is more energetic than the other albums. Another interesting finding is that all of the albums are not overly positive or negative, all of the albums have a similar valence centered around 0.5.

### (pt. 2)

```{r songmoodplot_2}
mean_valence_energy_disc <- disc %>% 
  group_by(artist_name) %>% 
  summarise(artist_name = artist_name,
            album_name = album_name,
            track_name = track_name,
            valence = mean(valence),
            energy  = mean(energy))

song_mood_plot <- ggplot(disc, aes(energy, valence, color=artist_name, shape=artist_name, label=track_name)) +
  geom_point(alpha=.25) +
  geom_point(data=mean_valence_energy_disc, size=4) +
  geom_vline(xintercept=0.5, linetype="dotted") +
  geom_hline(yintercept=0.5, linetype="dotted") +
  theme_bw() +
  xlim(0,1) +
  ylim(0,1) +
  labs(
    title = "Song mood (entire discogrophy)",
    x = "Energy",
    y = "Valence"
  )

song_mood_plot <- song_mood_plot + 
                 annotate("text", x=.25, y=.25, label="Sad", alpha=.6) +
                 annotate("text", x=.25, y=.75, label="Relaxed", alpha=.6) +
                 annotate("text", x=.75, y=.25, label="Angry", alpha=.6) +
                 annotate("text", x=.75, y=.75, label="Happy", alpha=.6) 

ggplotly(song_mood_plot)
``` 

***

The next step is to examine if these results are consistent over these artists' entire discography, the results can be seen below.

Interestingly, for all of the artists the mood of their albums (the corpus) are consistent throughout their entire discographies. Thus the corpus is representable for the artists entire music catalog. Another assumption we can make based on this outcome is, that the artists did not experiment a lot when it comes to valence and energy troughout their careers.
  
### The outsider albums do not sound the same

```{r cohesivenessplot, echo=FALSE, message=FALSE, warning=FALSE}
danceability_valence_energy_albums <- albums %>% 
  group_by(artist_name) %>% 
  summarise(artist_name = artist_name,
            album_name = album_name,
            track_name = track_name,
            score = valence + energy + danceability)

cohesivenessplot <- ggplot(danceability_valence_energy_albums, aes(x=album_name, y=score, color=artist_name, label=track_name)) + 
    geom_violin(alpha=.4) +
    geom_jitter(position=position_jitter(0.15), alpha=0.4) +
    geom_boxplot(alpha=.2, width=.2) +
    ylim(0,3) +
    labs(title = "Album cohesiveness", x="Album name", y="Cohesiveness Score", color="Artist") +
    theme(axis.text.x = element_text(angle=40, hjust=1))

ggplotly(cohesivenessplot)
```

***

To examine the albums in more detail I wanted to examine the cohesiveness of each album. To determine the cohesiveness of each album I introduced a cohesiveness score, which is defined as follows:

- cohesiveness score = danceability + valence + energy

- Where dancability is defined by Spotify as: Danceability describes how suitable a track is for dancing based on a combination of musical elements including tempo, rhythm stability, beat strength, and overall regularity. A value of 0.0 is least danceable and 1.0 is most danceable.

I designed the cohesiveness score with these parameters because, they were descriptive scores rather than confidence scores. The cohesiveness scores were plotted in the violin plot below.

***

From these results we can observe a couple of findings. First, we can see that Wesley Willis's album is the most cohesive, meaning that all of his songs have a similar cohesiveness score. This is no surprise when we take into account that all of his songs have the exact same song structure, alongside the fact that all of his songs have a similar sound, something I am going to examine further in the coming weeks. Another finding is that Eilart Is Back, Godbless Tiny Tim and Yip Jump Music all have a high variance in cohesiveness score, meaning that they have a wide variety in songs (in the case of Eilart Pilarm's album this is not so strange, as it is essentially an Elvis compilation album). This is contrasted by Life In the USA and Canada and Philosophy of the World, which are albums that consist of songs that are more similar to eachother. 


### Some tracks aren't regular (pt. 1)

```{r spokenwordsplot, echo=FALSE, message=FALSE, warning=FALSE}
spokenwordplot <- ggplot(albums, aes(x=album_name, y=speechiness, color=artist_name, label=track_name)) +
  geom_jitter(width=.3) +
  geom_text(aes(label=ifelse(speechiness>.66,as.character(track_name),'')),size=3) +
  ylim(0,1) +
  labs(title = "Spoken word songs", x="Album name", y="Speechiness", color="Artist") +
  theme(axis.text.x = element_text(angle=40, hjust=1))

ggplotly(spokenwordplot)

```

***

Next I wanted to determine what songs are outliers when it comes to speechiness and instrumentalness, which Spotify defines as:

- Speechiness: detects the presence of spoken words in a track. The more exclusively speech-like the recording (e.g. talk show, audio book, poetry), the closer to 1.0 the attribute value. Values above 0.66 describe tracks that are probably made entirely of spoken words. Values between 0.33 and 0.66 describe tracks that may contain both music and speech, either in sections or layered, including such cases as rap music. Values below 0.33 most likely represent music and other non-speech-like tracks.

- Instrumentalness: predicts whether a track contains no vocals. “Ooh” and “aah” sounds are treated as instrumental in this context. Rap or spoken word tracks are clearly “vocal”. The closer the instrumentalness value is to 1.0, the greater likelihood the track contains no vocal content. Values above 0.5 are intended to represent instrumental tracks, but confidence is higher as the value approaches 1.0.

To summarize, I want to see which songs are spoken word songs and which are instrumentals, the results can be seen in the two jitter plots below.

Now that I have determined the spoken word and instrumental tracks, I could decide to exclude these out of the dataframe to compare the songs that have the most similar properties. This could lead to better comparisons that we can use to either determine what makes these musicians outsiders, or what the differences are between these outsider musicians.   

### (pt. 2)

```{r instrumentalplot, echo=FALSE, message=FALSE, warning=FALSE}
instrumentalplot <- ggplot(albums, aes(x=album_name, y=instrumentalness, color=artist_name, label=track_name)) +
  geom_jitter(width=.3) +
#  geom_text_repel(data=filter(albums, instrumentalness>0.5), aes(label=track_name), size=3) +

  geom_text(aes(label=ifelse(instrumentalness>.5,as.character(track_name),'')),size=3,hjust=1,vjust=-.5) +
  ylim(0,1) +
  labs(title = "Instrumental songs", x="Album name", y="Instrumentalness", color="Artist") +
  theme(axis.text.x = element_text(angle=40, hjust=1))

ggplotly(instrumentalplot)
```
